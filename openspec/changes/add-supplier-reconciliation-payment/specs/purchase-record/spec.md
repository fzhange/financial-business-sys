## ADDED Requirements

### Requirement: 采购入库记录管理
系统 SHALL 支持创建和管理采购入库记录，记录供应商发货后企业收货的详细信息。

#### Scenario: 创建采购入库记录
- **GIVEN** 用户在采购记录管理页面
- **WHEN** 用户填写入库信息（供应商、采购订单号、入库日期、物料明细）并提交
- **THEN** 系统创建一条类型为"入库"的采购记录，入库完成即为"已确认"状态，可直接用于生成对账单

#### Scenario: 查看采购记录列表
- **GIVEN** 存在多条采购记录
- **WHEN** 用户访问采购记录列表页面
- **THEN** 系统显示所有采购记录，支持按类型（入库/退货）、供应商、日期范围筛选

### Requirement: 采购退货记录管理
系统 SHALL 支持创建和管理采购退货记录，记录向供应商退货的详细信息。

#### Scenario: 创建采购退货记录
- **GIVEN** 用户在采购记录管理页面
- **WHEN** 用户填写退货信息（供应商、原采购订单号、退货日期、退货物料明细）并提交
- **THEN** 系统创建一条类型为"退货"的采购记录，金额为负值，退货完成即为"已确认"状态

#### Scenario: 退货记录影响对账
- **GIVEN** 存在已确认的退货记录
- **WHEN** 生成对账单时
- **THEN** 退货金额从入库总额中扣除，计算净应付金额

### Requirement: 采购记录数据结构
系统 SHALL 按以下结构存储采购记录数据：
- 记录ID、单据编号、类型（入库/退货）
- 供应商ID、供应商名称
- 关联采购订单号
- 单据日期
- 物料明细（编码、名称、规格、单位、数量、单价、金额）
- 总金额、状态
- 创建时间、更新时间

#### Scenario: 采购记录包含必要字段
- **GIVEN** 用户创建采购记录
- **WHEN** 提交记录时
- **THEN** 系统验证必填字段（供应商、日期、至少一条明细）并自动计算总金额
