## ADDED Requirements

### Requirement: 应付账款自动生成
系统 SHALL 在对账单确认后自动生成应付账款记录。

#### Scenario: 对账确认后生成应付账款
- **GIVEN** 对账单状态变更为"已确认"
- **WHEN** 系统处理确认操作
- **THEN** 自动创建应付账款记录，应付金额等于对账单净额，状态为"未付款"

#### Scenario: 应付账款关联对账单
- **GIVEN** 应付账款由对账单生成
- **WHEN** 查看应付账款详情
- **THEN** 显示关联的对账单信息，支持跳转查看原对账单

### Requirement: 应付账款列表查看
系统 SHALL 提供应付账款列表页面，支持查看和筛选。

#### Scenario: 查看应付账款列表
- **GIVEN** 存在多条应付账款记录
- **WHEN** 用户访问应付账款列表页面
- **THEN** 系统显示所有应付账款，包括应付金额、已付金额、未付金额、状态等信息

#### Scenario: 按状态筛选应付账款
- **GIVEN** 应付账款列表页面
- **WHEN** 用户选择筛选条件（未付款/部分付款/已付款/已核销）
- **THEN** 系统显示符合条件的应付账款记录

### Requirement: 应付账款状态管理
系统 SHALL 根据付款情况自动更新应付账款状态。

#### Scenario: 部分付款状态
- **GIVEN** 应付账款已付金额大于0但小于应付金额
- **WHEN** 系统更新应付账款状态
- **THEN** 状态变更为"部分付款"

#### Scenario: 完全付款状态
- **GIVEN** 应付账款已付金额等于应付金额
- **WHEN** 系统更新应付账款状态
- **THEN** 状态变更为"已付款"

#### Scenario: 核销完成状态
- **GIVEN** 应付账款的所有付款已核销完成
- **WHEN** 系统更新应付账款状态
- **THEN** 状态变更为"已核销"

### Requirement: 应付账款数据结构
系统 SHALL 按以下结构存储应付账款数据：
- 应付账款ID、应付单号
- 关联对账单ID
- 供应商ID、供应商名称
- 应付金额、已付金额、未付金额
- 状态（未付款/部分付款/已付款/已核销）
- 到期日
- 关联发票ID列表
- 创建时间、更新时间

#### Scenario: 应付账款金额计算
- **GIVEN** 应付账款发生付款
- **WHEN** 系统更新应付账款
- **THEN** 自动计算：未付金额 = 应付金额 - 已付金额
